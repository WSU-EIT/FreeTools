# FreeTools.EndpointPoker — HTTP Route Testing Tool

> **Purpose:** Performs HTTP GET requests against all routes discovered by EndpointMapper, saving responses for comparison and regression testing.  
> **Last Reviewed:** 2025-12-19  
> **Version:** 2.2

---

## Overview

The **EndpointPoker** tool is a development utility that:

- **Reads routes:** Loads routes from CSV generated by EndpointMapper
- **Makes HTTP requests:** Performs GET requests to each route
- **Saves responses:** Stores HTML responses in a directory structure
- **Parallel execution:** Supports configurable thread count for fast testing

---

## Technology Stack

| Technology | Version | Purpose |
|------------|---------|---------|
| .NET | 10.0 | Runtime framework |
| HttpClient | Built-in | HTTP communication |

---

## Usage

### Via Aspire AppHost (Recommended)

The tool runs automatically when starting FreeTools.AppHost (waits for web app):

```bash
cd tools/FreeTools.AppHost
dotnet run
```

### Standalone

```bash
cd tools/FreeTools.EndpointPoker
dotnet run [baseUrl] [csvPath] [outputDir] [maxThreads]
```

### Environment Variables

| Variable | Description | Default |
|----------|-------------|---------|
| `BASE_URL` | Base URL of the web app | `https://localhost:5001` |
| `CSV_PATH` | Path to pages.csv | `pages.csv` |
| `OUTPUT_DIR` | Directory for HTML output | `page-snapshots` |
| `START_DELAY_MS` | Delay before starting (ms) | `0` |
| `MAX_THREADS` | Maximum parallel requests | `100` |

---

## Output Structure

```
snapshots/
├── /
│   └── default.html          # Home page response
├── Settings/
│   └── default.html          # /Settings response
├── Schedule/
│   └── default.html          # /Schedule response
└── Account/
    └── Login/
        └── default.html      # /Account/Login response
```

---

## Integration

```
┌─────────────────────────────────────────────────────────────────┐
│                      FreeTools Pipeline                         │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  1. EndpointMapper     2. EndpointPoker    3. BrowserSnapshot   │
│  ┌────────────┐        ┌────────────┐      ┌────────────────┐   │
│  │ Scan .razor│───────►│ HTTP GET   │      │ Playwright     │   │
│  │ files      │        │ each route │      │ screenshots    │   │
│  └────────────┘        └────────────┘      └────────────────┘   │
│        │                     │                    │             │
│        ▼                     ▼                    ▼             │
│   pages.csv            *.html files          *.png files        │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 📬 About

**FreeTools** is developed and maintained by **[Enrollment Information Technology (EIT)](https://em.wsu.edu/eit/meet-our-staff/)** at **Washington State University**.

📧 Questions or feedback? Visit our [team page](https://em.wsu.edu/eit/meet-our-staff/) or open an issue on [GitHub](https://github.com/WSU-EIT/FreeTools/issues)
